<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.340">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>dreamai_pdf - Parse</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="styles.css">
<meta property="og:title" content="dreamai_pdf - Parse">
<meta property="og:description" content="">
<meta property="og:site-name" content="dreamai_pdf">
<meta name="twitter:title" content="dreamai_pdf - Parse">
<meta name="twitter:description" content="">
<meta name="twitter:card" content="summary">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">dreamai_pdf</span>
    </a>
  </div>
        <div class="quarto-navbar-tools ms-auto">
</div>
          <div id="quarto-search" class="" title="Search"></div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./parse.html">Parse</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">dreamai_pdf</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./core.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Core</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./parse.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Parse</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./segment.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Segment</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#pred_cols" id="toc-pred_cols" class="nav-link active" data-scroll-target="#pred_cols">pred_cols</a></li>
  <li><a href="#pdf_to_batch" id="toc-pdf_to_batch" class="nav-link" data-scroll-target="#pdf_to_batch">pdf_to_batch</a></li>
  <li><a href="#load_cols_model" id="toc-load_cols_model" class="nav-link" data-scroll-target="#load_cols_model">load_cols_model</a></li>
  <li><a href="#create_model" id="toc-create_model" class="nav-link" data-scroll-target="#create_model">create_model</a></li>
  <li><a href="#create_head" id="toc-create_head" class="nav-link" data-scroll-target="#create_head">create_head</a></li>
  <li><a href="#adaptiveconcatpool2d" id="toc-adaptiveconcatpool2d" class="nav-link" data-scroll-target="#adaptiveconcatpool2d">AdaptiveConcatPool2d</a></li>
  <li><a href="#flatten" id="toc-flatten" class="nav-link" data-scroll-target="#flatten">Flatten</a></li>
  <li><a href="#linbndrop" id="toc-linbndrop" class="nav-link" data-scroll-target="#linbndrop">LinBnDrop</a></li>
  <li><a href="#headmodel" id="toc-headmodel" class="nav-link" data-scroll-target="#headmodel">HeadModel</a></li>
  <li><a href="#pdf_to_text" id="toc-pdf_to_text" class="nav-link" data-scroll-target="#pdf_to_text">pdf_to_text</a></li>
  <li><a href="#pdf_cols_to_text" id="toc-pdf_cols_to_text" class="nav-link" data-scroll-target="#pdf_cols_to_text">pdf_cols_to_text</a></li>
  <li><a href="#pdf_to_cols" id="toc-pdf_to_cols" class="nav-link" data-scroll-target="#pdf_to_cols">pdf_to_cols</a></li>
  <li><a href="#get_n_cols" id="toc-get_n_cols" class="nav-link" data-scroll-target="#get_n_cols">get_n_cols</a></li>
  <li><a href="#columncounter" id="toc-columncounter" class="nav-link" data-scroll-target="#columncounter">ColumnCounter</a></li>
  <li><a href="#col_clusters" id="toc-col_clusters" class="nav-link" data-scroll-target="#col_clusters">col_clusters</a></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/HamzaFarhan/dreamai_pdf/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Parse</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->
<hr>
<p><a href="https://github.com/HamzaFarhan/dreamai_pdf/blob/main/dreamai_pdf/parse.py#L193" target="_blank" style="float:right; font-size:smaller">source</a></p>
<section id="pred_cols" class="level3">
<h3 class="anchored" data-anchor-id="pred_cols">pred_cols</h3>
<blockquote class="blockquote">
<pre><code> pred_cols (pdf, model, classes=[1, 2, 3], device='cpu')</code></pre>
</blockquote>
<hr>
<p><a href="https://github.com/HamzaFarhan/dreamai_pdf/blob/main/dreamai_pdf/parse.py#L190" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="pdf_to_batch" class="level3">
<h3 class="anchored" data-anchor-id="pdf_to_batch">pdf_to_batch</h3>
<blockquote class="blockquote">
<pre><code> pdf_to_batch (pdf)</code></pre>
</blockquote>
<hr>
<p><a href="https://github.com/HamzaFarhan/dreamai_pdf/blob/main/dreamai_pdf/parse.py#L184" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="load_cols_model" class="level3">
<h3 class="anchored" data-anchor-id="load_cols_model">load_cols_model</h3>
<blockquote class="blockquote">
<pre><code> load_cols_model (path, device='cpu')</code></pre>
</blockquote>
<hr>
<p><a href="https://github.com/HamzaFarhan/dreamai_pdf/blob/main/dreamai_pdf/parse.py#L175" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="create_model" class="level3">
<h3 class="anchored" data-anchor-id="create_model">create_model</h3>
<blockquote class="blockquote">
<pre><code> create_model (num_classes=4, lin_ftrs=None, ps=0.5, concat_pool=True,
               bn_final=False, lin_first=False, actv=None,
               relu_fn=ReLU(inplace=True), trial=None, num_lin_ftrs=None,
               n_lin_ftrs=None, trial_num_lin_ftrs=[1, 3],
               trial_n_lin_ftrs=[256, 512, 1024])</code></pre>
</blockquote>
<hr>
<p><a href="https://github.com/HamzaFarhan/dreamai_pdf/blob/main/dreamai_pdf/parse.py#L135" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="create_head" class="level3">
<h3 class="anchored" data-anchor-id="create_head">create_head</h3>
<blockquote class="blockquote">
<pre><code> create_head (nf, n_out, lin_ftrs=None, ps=0.5, concat_pool=True,
              bn_final=False, lin_first=False, y_range=None, actv=None,
              relu_fn=ReLU(inplace=True), trial=None, num_lin_ftrs=None,
              n_lin_ftrs=None, trial_num_lin_ftrs=[1, 3],
              trial_n_lin_ftrs=[256, 512, 1024])</code></pre>
</blockquote>
<p>Model head that takes <code>nf</code> features, runs through <code>lin_ftrs</code>, and out <code>n_out</code> classes.</p>
<hr>
<p><a href="https://github.com/HamzaFarhan/dreamai_pdf/blob/main/dreamai_pdf/parse.py#L126" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="adaptiveconcatpool2d" class="level3">
<h3 class="anchored" data-anchor-id="adaptiveconcatpool2d">AdaptiveConcatPool2d</h3>
<blockquote class="blockquote">
<pre><code> AdaptiveConcatPool2d (size=None)</code></pre>
</blockquote>
<p>Layer that concats <code>AdaptiveAvgPool2d</code> and <code>AdaptiveMaxPool2d</code></p>
<hr>
<p><a href="https://github.com/HamzaFarhan/dreamai_pdf/blob/main/dreamai_pdf/parse.py#L122" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="flatten" class="level3">
<h3 class="anchored" data-anchor-id="flatten">Flatten</h3>
<blockquote class="blockquote">
<pre><code> Flatten (*args, **kwargs)</code></pre>
</blockquote>
<p>Base class for all neural network modules.</p>
<p>Your models should also subclass this class.</p>
<p>Modules can also contain other Modules, allowing to nest them in a tree structure. You can assign the submodules as regular attributes::</p>
<pre><code>import torch.nn as nn
import torch.nn.functional as F

class Model(nn.Module):
    def __init__(self):
        super().__init__()
        self.conv1 = nn.Conv2d(1, 20, 5)
        self.conv2 = nn.Conv2d(20, 20, 5)

    def forward(self, x):
        x = F.relu(self.conv1(x))
        return F.relu(self.conv2(x))</code></pre>
<p>Submodules assigned in this way will be registered, and will have their parameters converted too when you call :meth:<code>to</code>, etc.</p>
<p>.. note:: As per the example above, an <code>__init__()</code> call to the parent class must be made before assignment on the child.</p>
<p>:ivar training: Boolean represents whether this module is in training or evaluation mode. :vartype training: bool</p>
<hr>
<p><a href="https://github.com/HamzaFarhan/dreamai_pdf/blob/main/dreamai_pdf/parse.py#L111" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="linbndrop" class="level3">
<h3 class="anchored" data-anchor-id="linbndrop">LinBnDrop</h3>
<blockquote class="blockquote">
<pre><code> LinBnDrop (n_in, n_out, bn=True, p=0.0, act=None, lin_first=False)</code></pre>
</blockquote>
<p>Module grouping <code>BatchNorm1d</code>, <code>Dropout</code> and <code>Linear</code> layers</p>
<hr>
<p><a href="https://github.com/HamzaFarhan/dreamai_pdf/blob/main/dreamai_pdf/parse.py#L100" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="headmodel" class="level3">
<h3 class="anchored" data-anchor-id="headmodel">HeadModel</h3>
<blockquote class="blockquote">
<pre><code> HeadModel (pool, linear)</code></pre>
</blockquote>
<p>Base class for all neural network modules.</p>
<p>Your models should also subclass this class.</p>
<p>Modules can also contain other Modules, allowing to nest them in a tree structure. You can assign the submodules as regular attributes::</p>
<pre><code>import torch.nn as nn
import torch.nn.functional as F

class Model(nn.Module):
    def __init__(self):
        super().__init__()
        self.conv1 = nn.Conv2d(1, 20, 5)
        self.conv2 = nn.Conv2d(20, 20, 5)

    def forward(self, x):
        x = F.relu(self.conv1(x))
        return F.relu(self.conv2(x))</code></pre>
<p>Submodules assigned in this way will be registered, and will have their parameters converted too when you call :meth:<code>to</code>, etc.</p>
<p>.. note:: As per the example above, an <code>__init__()</code> call to the parent class must be made before assignment on the child.</p>
<p>:ivar training: Boolean represents whether this module is in training or evaluation mode. :vartype training: bool</p>
<hr>
<p><a href="https://github.com/HamzaFarhan/dreamai_pdf/blob/main/dreamai_pdf/parse.py#L95" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="pdf_to_text" class="level3">
<h3 class="anchored" data-anchor-id="pdf_to_text">pdf_to_text</h3>
<blockquote class="blockquote">
<pre><code> pdf_to_text (data_path, model=None, max_n_cols=3, cols_list=[2, 1],
              device='cpu')</code></pre>
</blockquote>
<hr>
<p><a href="https://github.com/HamzaFarhan/dreamai_pdf/blob/main/dreamai_pdf/parse.py#L91" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="pdf_cols_to_text" class="level3">
<h3 class="anchored" data-anchor-id="pdf_cols_to_text">pdf_cols_to_text</h3>
<blockquote class="blockquote">
<pre><code> pdf_cols_to_text (pdf_cols)</code></pre>
</blockquote>
<hr>
<p><a href="https://github.com/HamzaFarhan/dreamai_pdf/blob/main/dreamai_pdf/parse.py#L36" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="pdf_to_cols" class="level3">
<h3 class="anchored" data-anchor-id="pdf_to_cols">pdf_to_cols</h3>
<blockquote class="blockquote">
<pre><code> pdf_to_cols (data_path, model=None, max_n_cols=3, cols_list=[2, 1],
              device='cpu')</code></pre>
</blockquote>
<hr>
<p><a href="https://github.com/HamzaFarhan/dreamai_pdf/blob/main/dreamai_pdf/parse.py#L27" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="get_n_cols" class="level3">
<h3 class="anchored" data-anchor-id="get_n_cols">get_n_cols</h3>
<blockquote class="blockquote">
<pre><code> get_n_cols (data, min_c=2, max_c=10, max_n_cols=3)</code></pre>
</blockquote>
<pre><code>/opt/hostedtoolcache/Python/3.9.16/x64/lib/python3.9/site-packages/fastcore/docscrape.py:225: UserWarning: Unknown section Attributes
  else: warn(msg)
/opt/hostedtoolcache/Python/3.9.16/x64/lib/python3.9/site-packages/fastcore/docscrape.py:225: UserWarning: Unknown section Examples
  else: warn(msg)
/opt/hostedtoolcache/Python/3.9.16/x64/lib/python3.9/site-packages/fastcore/docscrape.py:225: UserWarning: Unknown section Notes
  else: warn(msg)</code></pre>
<hr>
<p><a href="https://github.com/HamzaFarhan/dreamai_pdf/blob/main/dreamai_pdf/parse.py#L23" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="columncounter" class="level3">
<h3 class="anchored" data-anchor-id="columncounter">ColumnCounter</h3>
<blockquote class="blockquote">
<pre><code> ColumnCounter (estimator, ax=None, k=10, metric='distortion',
                distance_metric='euclidean', timings=True,
                locate_elbow=True, **kwargs)</code></pre>
</blockquote>
<p>The K-Elbow Visualizer implements the “elbow” method of selecting the optimal number of clusters for K-means clustering. K-means is a simple unsupervised machine learning algorithm that groups data into a specified number (k) of clusters. Because the user must specify in advance what k to choose, the algorithm is somewhat naive – it assigns all members to k clusters even if that is not the right k for the dataset.</p>
<p>The elbow method runs k-means clustering on the dataset for a range of values for k (say from 1-10) and then for each value of k computes an average score for all clusters. By default, the <code>distortion</code> score is computed, the sum of square distances from each point to its assigned center. Other metrics can also be used such as the <code>silhouette</code> score, the mean silhouette coefficient for all samples or the <code>calinski_harabasz</code> score, which computes the ratio of dispersion between and within clusters.</p>
<p>When these overall metrics for each model are plotted, it is possible to visually determine the best value for k. If the line chart looks like an arm, then the “elbow” (the point of inflection on the curve) is the best value of k. The “arm” can be either up or down, but if there is a strong inflection point, it is a good indication that the underlying model fits best at that point.</p>
<table class="table">
<colgroup>
<col style="width: 6%">
<col style="width: 25%">
<col style="width: 34%">
<col style="width: 34%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th><strong>Type</strong></th>
<th><strong>Default</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>estimator</td>
<td>a scikit-learn clusterer</td>
<td></td>
<td>Should be an instance of an unfitted clusterer, specifically <code>KMeans</code> or<br><code>MiniBatchKMeans</code>. If it is not a clusterer, an exception is raised.</td>
</tr>
<tr class="even">
<td>ax</td>
<td>NoneType</td>
<td>None</td>
<td>The axes to plot the figure on. If None is passed in the current axes<br>will be used (or generated if required).</td>
</tr>
<tr class="odd">
<td>k</td>
<td>int</td>
<td>10</td>
<td>The k values to compute silhouette scores for. If a single integer<br>is specified, then will compute the range (2,k). If a tuple of 2<br>integers is specified, then k will be in np.arange(k[0], k[1]).<br>Otherwise, specify an iterable of integers to use as values for k.</td>
</tr>
<tr class="even">
<td>metric</td>
<td>str</td>
<td>distortion</td>
<td>Select the scoring metric to evaluate the clusters. The default is the<br>mean distortion, defined by the sum of squared distances between each<br>observation and its closest centroid. Other metrics include:<br><br>- <strong>distortion</strong>: mean sum of squared distances to centers<br>- <strong>silhouette</strong>: mean ratio of intra-cluster and nearest-cluster distance<br>- <strong>calinski_harabasz</strong>: ratio of within to between cluster dispersion</td>
</tr>
<tr class="odd">
<td>distance_metric</td>
<td>str</td>
<td>euclidean</td>
<td>The metric to use when calculating distance between instances in a<br>feature array. If metric is a string, it must be one of the options allowed<br>by sklearn’s metrics.pairwise.pairwise_distances. If X is the distance array itself,<br>use metric=“precomputed”.</td>
</tr>
<tr class="even">
<td>timings</td>
<td>bool</td>
<td>True</td>
<td>Display the fitting time per k to evaluate the amount of time required<br>to train the clustering model.</td>
</tr>
<tr class="odd">
<td>locate_elbow</td>
<td>bool</td>
<td>True</td>
<td>Automatically find the “elbow” or “knee” which likely corresponds to the optimal<br>value of k using the “knee point detection algorithm”. The knee point detection<br>algorithm finds the point of maximum curvature, which in a well-behaved<br>clustering problem also represents the pivot of the elbow curve. The point is<br>labeled with a dashed line and annotated with the score and k values.</td>
</tr>
<tr class="even">
<td>kwargs</td>
<td>dict</td>
<td></td>
<td>Keyword arguments that are passed to the base class and may influence<br>the visualization as defined in other Visualizers.</td>
</tr>
</tbody>
</table>
<hr>
<p><a href="https://github.com/HamzaFarhan/dreamai_pdf/blob/main/dreamai_pdf/parse.py#L13" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="col_clusters" class="level3">
<h3 class="anchored" data-anchor-id="col_clusters">col_clusters</h3>
<blockquote class="blockquote">
<pre><code> col_clusters (data, data2=None, n_cols=3)</code></pre>
</blockquote>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>